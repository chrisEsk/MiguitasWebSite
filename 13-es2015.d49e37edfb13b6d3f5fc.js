(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{KiVI:function(t,i,n){"use strict";n.r(i),n.d(i,"BrandListPageModule",(function(){return K}));var e=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),a=n("TEn/"),c=n("mrSG"),s=n("VVxe"),l=n("LvDl"),h=n("R0Ic"),d=n("PLH8"),b=n("dkQB"),g=n("sybk"),p=n("v0iw"),u=n("fXoL");let f=(()=>{class t{constructor(){this.parseAppId=b.a.parseAppId,this.parseJSKey=b.a.parseJSKey,this.parseServerUrl=b.a.parseServerUrl,this.parseInitialize()}parseInitialize(){p.initialize(this.parseAppId,this.parseJSKey),p.serverURL=this.parseServerUrl}GetBrands(t,i,n){return p.Cloud.run("app_GetBrands")}GetTagsForBrand(t){return Object(c.a)(this,void 0,void 0,(function*(){const i=p.Object.extend("BrandTags"),n=new p.Query(i);return n.equalTo("brand",t),n.include("tag"),n.ascending("order"),yield n.find()}))}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=u.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=n("otYU");function v(t,i){1&t&&u.Ib(0,"ion-spinner",4)}function x(t,i){1&t&&u.Ib(0,"ion-icon",15)}const O=function(t){return{background:t}},I=function(t){return{color:t}};function y(t,i){if(1&t&&(u.Kb(0,"span"),u.Kb(1,"ion-badge",13),u.jc(2,x,1,0,"ion-icon",14),u.Kb(3,"ion-text",13),u.kc(4),u.Jb(),u.Jb(),u.Jb()),2&t){const t=i.$implicit;u.xb(1),u.ac("ngStyle",u.dc(4,O,t.get("isHighlight")?"var(--ion-color-warning)":"")),u.xb(1),u.ac("ngIf",t.get("isHighlight")),u.xb(1),u.ac("ngStyle",u.dc(6,I,t.get("isHighlight")?"var(--hotpink)":"")),u.xb(1),u.mc(" ",t.get("tag").get("name_es")," ")}}function P(t,i){if(1&t&&(u.Kb(0,"div"),u.jc(1,y,5,8,"span",12),u.Jb()),2&t){const t=u.Ub().$implicit;u.xb(1),u.ac("ngForOf",t.tags)}}function S(t,i){if(1&t){const t=u.Lb();u.Kb(0,"ion-card",5),u.Sb("click",(function(){u.fc(t);const n=i.$implicit;return u.Ub().goToProductList(n)})),u.Kb(1,"ion-card-header"),u.Kb(2,"ion-card-title",6),u.kc(3),u.Jb(),u.Kb(4,"ion-card-subtitle"),u.kc(5),u.Jb(),u.Jb(),u.Ib(6,"img",7),u.Vb(7,"cloudinaryPipe"),u.Kb(8,"ion-card-content"),u.jc(9,P,2,1,"div",8),u.Kb(10,"ion-button",9),u.Ib(11,"ion-icon",10),u.Kb(12,"ion-text",11),u.kc(13," Entrar "),u.Jb(),u.Jb(),u.Jb(),u.Jb()}if(2&t){const t=i.$implicit;u.xb(3),u.mc(" ",t.get("name")," "),u.xb(2),u.mc(" ",t.get("description_es")," "),u.xb(1),u.bc("src",u.Xb(7,4,t.get("imgUrl"),"w720"),u.hc),u.xb(3),u.ac("ngIf",(null==t.tags?null:t.tags.length)>0)}}let k=(()=>{class t{constructor(t,i,n,e,o,r){this.router=t,this.keyboard=i,this.brandService=n,this.loadingCtrl=e,this.alertCtrl=o,this.authService=r,this.searchCriteria="",this.daList=[],this.ionRefresher=!1}ngOnInit(){this.resetPagination(),this.search()}doRefresh(t){return Object(c.a)(this,void 0,void 0,(function*(){this.ionRefresher=!0,yield this.ngOnInit(),t.target.complete(),this.ionRefresher=!1}))}resetPagination(){this.useInfiniteScroll=!1,this.fetchingPage=!1,this.page=0,this.lastPage=!1}search(){return new Promise((t,i)=>Object(c.a)(this,void 0,void 0,(function*(){this.loading=!this.useInfiniteScroll&&!this.ionRefresher,this.noResults=!1,this.brandService.GetBrands(this.page,b.a.SETTINGS.PAGE_SIZE,s(this.searchCriteria)).then(i=>{this.useInfiniteScroll?Object(l.each)(i,t=>Object(c.a)(this,void 0,void 0,(function*(){this.daList.push(t),t.tags=yield this.brandService.GetTagsForBrand(t)}))):(this.daList=i,Object(l.each)(this.daList,t=>Object(c.a)(this,void 0,void 0,(function*(){t.tags=yield this.brandService.GetTagsForBrand(t)})))),this.loading=!1,this.noResults=Object(l.isEmpty)(this.daList),t(i)}).catch(t=>{console.error(t),this.loading=!1,this.noResults=!0,this.daList=[],i(t)})})))}loadMore(){this.fetchingPage||(this.useInfiniteScroll=!0,this.fetchingPage=!0,this.page++,this.search().then(t=>{this.useInfiniteScroll=!1,this.fetchingPage=!1,this.infiniteScroll.complete(),t?this.lastPage=0===t.length:this.page--}).catch(t=>{console.error(t),this.infiniteScroll.complete()}))}criteriaChanged(){this.resetPagination(),this.search()}clearSearchBar(){this.searchCriteria="",this.hideKeyboard(),this.scrollToTop(),this.resetPagination(),this.search()}hideKeyboard(){this.keyboard.hide()}scrollToTop(){this.content.scrollToTop(1500)}goToProductList(t){const i=t.get("urlId");this.router.navigate(["/product-list/"+i])}}return t.\u0275fac=function(i){return new(i||t)(u.Hb(r.f),u.Hb(d.a),u.Hb(f),u.Hb(a.U),u.Hb(a.a),u.Hb(g.a))},t.\u0275cmp=u.Bb({type:t,selectors:[["app-brand-list"]],viewQuery:function(t,i){var n;1&t&&(u.oc(a.o,!0),u.oc(a.u,!0)),2&t&&(u.ec(n=u.Tb())&&(i.content=n.first),u.ec(n=u.Tb())&&(i.infiniteScroll=n.first))},features:[u.wb([d.a])],decls:12,vars:3,consts:[["color","primary"],["slot","start"],["class","center3 mt-4","name","crescent",4,"ngIf"],["tappable","",3,"click",4,"ngFor","ngForOf"],["name","crescent",1,"center3","mt-4"],["tappable","",3,"click"],[1,"hvr-grow","ion-margin-bottom"],[1,"cardImg",3,"src"],[4,"ngIf"],["size","medium","expand","full","shape","round","color","secondary"],["slot","start","name","arrow-forward","color","hotpink"],["color","light",1,"cardBtn"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["name","star","color","hotpink",4,"ngIf"],["name","star","color","hotpink"]],template:function(t,i){1&t&&(u.Kb(0,"ion-header"),u.Kb(1,"ion-toolbar",0),u.Kb(2,"ion-buttons",1),u.Ib(3,"ion-menu-button"),u.Jb(),u.Kb(4,"ion-title"),u.kc(5,"Marcas"),u.Jb(),u.Jb(),u.Jb(),u.Kb(6,"ion-content"),u.Kb(7,"div"),u.Kb(8,"main"),u.jc(9,v,1,0,"ion-spinner",2),u.Kb(10,"section"),u.jc(11,S,14,7,"ion-card",3),u.Jb(),u.Jb(),u.Jb(),u.Jb()),2&t&&(u.xb(7),u.ac("@staggerIn",null==i.daList?null:i.daList.length),u.xb(2),u.ac("ngIf",i.loading),u.xb(2),u.ac("ngForOf",i.daList))},directives:[a.r,a.R,a.h,a.B,a.Q,a.o,e.j,e.i,a.M,a.i,a.k,a.m,a.l,a.j,a.g,a.s,a.O,a.f,e.k],pipes:[m.a],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-light),var(--ion-color-secondary))}@media (min-width:620px){main[_ngcontent-%COMP%]{-moz-column-count:1;column-count:1;-moz-column-gap:20px;column-gap:20px}section[_ngcontent-%COMP%]{-moz-column-break-inside:avoid;break-inside:avoid}}@media (min-width:960px){main[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}}ion-badge[_ngcontent-%COMP%]{margin:3px}main[_ngcontent-%COMP%]{margin:0 auto;padding:20px}ion-card[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--cream-shade),var(--cream));max-width:720px}.cardImg[_ngcontent-%COMP%]{max-height:480px;max-width:720px}ion-card-title[_ngcontent-%COMP%]{font-weight:900;color:var(--ion-color-light);text-shadow:.5px .5px .5px var(--ion-color-dark);text-decoration:underline;font-size:27px}section[_ngcontent-%COMP%]{margin-bottom:20px;overflow:hidden}"],data:{animation:[Object(h.k)("staggerIn",[Object(h.j)("* => *",[Object(h.f)(":enter",Object(h.i)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(h.f)(":enter",Object(h.h)("300ms",[Object(h.e)("600ms",Object(h.i)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),t})();var j=n("7JYj");const w=[{path:"",component:k}];let K=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(i){return new(i||t)},imports:[[e.b,o.d,a.S,r.h.forChild(w),j.a]]}),t})()}}]);