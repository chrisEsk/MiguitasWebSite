!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{F4UR:function(t,r,o){"use strict";o.r(r),o.d(r,"LoginPageModule",(function(){return w}));var i,a=o("ofXK"),s=o("3Pt+"),c=o("tyNb"),u=o("TEn/"),l=o("mrSG"),d=o("sybk"),p=o("v0iw"),g=o("dkQB"),b=o("fXoL"),m=((i=function(){function t(){e(this,t),this.parseAppId=g.a.parseAppId,this.parseJSKey=g.a.parseJSKey,this.parseServerUrl=g.a.parseServerUrl,this.parseInitialize()}return n(t,[{key:"parseInitialize",value:function(){p.initialize(this.parseAppId,this.parseJSKey),p.serverURL=this.parseServerUrl}},{key:"RecoverPassword",value:function(e){return p.User.requestPasswordReset(e.trim().toLowerCase())}}]),t}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=b.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i),h=o("2m4Y");function f(e,t){1&e&&(b.Kb(0,"p",23),b.Kb(1,"ion-text",24),b.kc(2," Formato inv\xe1lido. "),b.Jb(),b.Jb())}var v,C,k=function(){return["/signup"]},x=function(){return["/home"]},O=[{path:"",component:(v=function(){function t(n,r,o,i,a,s,c,u,l){e(this,t),this.authService=n,this.router=r,this.translate=o,this.menuCtrl=i,this.toastCtrl=a,this.alertCtrl=s,this.loadingCtrl=c,this.formBuilder=u,this.forgotPasswordService=l,this.logo="/assets/img/miguitas_logo.png"}return n(t,[{key:"ionViewWillEnter",value:function(){this.menuCtrl.enable(!1)}},{key:"ngOnInit",value:function(){this.authService.SignOut(),this.onLoginForm=this.formBuilder.group({email:[null,s.l.compose([s.l.required])],password:[null,s.l.compose([s.l.required])]})}},{key:"submit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create();case 2:(t=e.sent).present(),this.authService.Login(this.onLoginForm.value).then((function(e){t.dismiss(),n.goToHome()})).catch((function(e){console.error(e),t.dismiss(),n.alertInvalidCredentials()}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"alertInvalidCredentials",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"Usuario Inv\xe1lido",message:"Verifique las credenciales e intente de nuevo.",buttons:["Ok"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"openForgotPassAlert",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"Recuperaci\xf3n de contrase\xf1a",message:"Ingrese su correo electr\xf3nico:",inputs:[{name:"email",type:"email",placeholder:"Correo Electr\xf3nico"}],buttons:[{text:this.translate.get("app.label.cancel"),role:"cancel",cssClass:"secondary"},{text:this.translate.get("app.label.accept"),handler:function(e){return Object(l.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.forgotPass(e);case 1:case"end":return t.stop()}}),t,this)})))}}]});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"forgotPass",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validateEmail(e.email)){t.next=7;break}return t.next=3,this.toastCtrl.create({message:"Correo electr\xf3nico inv\xe1lido.",duration:4e3,position:"bottom",buttons:[{icon:"close",side:"end"}],color:"danger"});case 3:return n=t.sent,t.next=6,n.present();case 6:return t.abrupt("return",void t.sent);case 7:return t.next=9,this.loadingCtrl.create();case 9:(r=t.sent).present(),this.forgotPasswordService.RecoverPassword(e.email.trim().toLowerCase()).then((function(t){return Object(l.a)(o,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.dismiss(),t.next=3,this.alertCtrl.create({header:"Sigue el enlace enviado a "+e.email,message:"Tip: Recuerda revisar la carpeta de correo no deseado si no lo encuentras.",buttons:["Ok"]});case 3:return n=t.sent,t.next=6,n.present();case 6:case"end":return t.stop()}}),t,this)})))})).catch((function(t){return Object(l.a)(o,void 0,void 0,regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.dismiss(),n.next=3,this.alertCtrl.create({header:"Error",message:"No se pudo enviar el correo de recuperaci\xf3n a "+e.email,buttons:["Ok"]});case 3:return o=n.sent,n.next=6,o.present();case 6:console.error(t);case 7:case"end":return n.stop()}}),n,this)})))}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"validateEmail",value:function(e){return/\S+@\S+\.\S+/.test(e)}},{key:"goToHome",value:function(){this.router.navigate(["/home"])}}]),t}(),v.\u0275fac=function(e){return new(e||v)(b.Hb(d.a),b.Hb(c.f),b.Hb(h.a),b.Hb(u.U),b.Hb(u.ab),b.Hb(u.a),b.Hb(u.T),b.Hb(s.a),b.Hb(m))},v.\u0275cmp=b.Bb({type:v,selectors:[["app-login"]],decls:35,vars:8,consts:[[1,"login","auth-page","ion-padding"],[1,"auth-content"],[1,"logo",3,"src"],[1,"animate__animated","animate__fadeInUp","animate__fast"],["color","light ion-padding"],[1,"list-form",3,"formGroup","keyup.enter"],[1,"ion-no-padding"],["position","floating"],["name","mail"],["type","email","color","hotpink","formControlName","email"],["class","text08",4,"ngIf"],["name","lock-closed"],["type","password","color","hotpink","formControlName","password"],["color","success","size","medium","expand","full","shape","round","tappable","",1,"ion-margin",3,"disabled","click"],["name","log-in","slot","end"],["color","secondary","size","medium","expand","full","shape","round",1,"ion-margin",3,"routerLink"],[1,"row"],[1,"col","ion-padding"],[3,"routerLink"],["color","dark"],["name","arrow-back","slot","start"],[1,"col","text-align-right","ion-padding"],[3,"click"],[1,"text08"],["color","danger"]],template:function(e,t){1&e&&(b.Kb(0,"ion-content",0),b.Kb(1,"div",1),b.Kb(2,"div"),b.Ib(3,"ion-img",2),b.Jb(),b.Kb(4,"div",3),b.Kb(5,"ion-card",4),b.Kb(6,"form",5),b.Sb("keyup.enter",(function(){return!!t.onLoginForm.valid&&t.submit()})),b.Kb(7,"ion-item",6),b.Kb(8,"ion-label",7),b.Ib(9,"ion-icon",8),b.kc(10," \xa0Correo Electr\xf3nico "),b.Jb(),b.Ib(11,"ion-input",9),b.Jb(),b.jc(12,f,3,0,"p",10),b.Kb(13,"ion-item",6),b.Kb(14,"ion-label",7),b.Ib(15,"ion-icon",11),b.kc(16," \xa0Contrase\xf1a "),b.Jb(),b.Ib(17,"ion-input",12),b.Jb(),b.Jb(),b.Kb(18,"ion-button",13),b.Sb("click",(function(){return t.submit()})),b.Ib(19,"ion-icon",14),b.kc(20," Iniciar Sesi\xf3n "),b.Jb(),b.Kb(21,"ion-button",15),b.kc(22," Crear Cuenta "),b.Jb(),b.Kb(23,"div",16),b.Kb(24,"div",17),b.Kb(25,"ion-text",18),b.Kb(26,"ion-text",19),b.Kb(27,"strong"),b.Ib(28,"ion-icon",20),b.kc(29," Regresar "),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(30,"div",21),b.Kb(31,"ion-text",22),b.Sb("click",(function(){return t.openForgotPassAlert()})),b.Kb(32,"ion-text",19),b.Kb(33,"strong"),b.kc(34," \xbfOlvidaste tu contrase\xf1a? "),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&e&&(b.xb(3),b.ac("src",t.logo),b.xb(3),b.ac("formGroup",t.onLoginForm),b.xb(6),b.ac("ngIf",t.onLoginForm.get("email").touched&&t.onLoginForm.get("email").hasError("required")),b.xb(6),b.ac("disabled",!t.onLoginForm.valid),b.xb(3),b.ac("routerLink",b.cc(6,k)),b.xb(4),b.ac("routerLink",b.cc(7,x)))},directives:[u.o,u.s,u.i,s.m,s.i,s.c,u.w,u.x,u.r,u.v,u.Z,s.h,s.b,a.j,u.g,u.X,c.g,u.N],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-medium),var(--ion-color-light))}.auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]{border-radius:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:first-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:first-of-type{border-radius:2px 0 0 2px}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:last-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:last-of-type{border-radius:0 2px 2px 0}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]{margin:auto;max-width:720px}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:180px;margin:auto;display:block}"]}),v)}],w=((C=function t(){e(this,t)}).\u0275mod=b.Fb({type:C}),C.\u0275inj=b.Eb({factory:function(e){return new(e||C)},imports:[[a.b,s.d,s.k,u.R,c.h.forChild(O)]]}),C)}}])}();